{% extends 'base.html' %}

{% block content_head %}
    <h1>Flights</h1>
{% endblock %}

{% block main_content %}
     <table cellspacing="2" border="1" cellpadding="5">
    <tr>
        <th>Flight number</th>
        <th>Departure date</th>
        <th>Departure city</th>
        <th>Arrival city</th>
        <th>Departure time</th>
        <th>Arrival time</th>
        <th>Economy</th>
        <th>Business</th>
        <th>First</th>
        <th></th>
    </tr>
    {% for unique_flight in unique_flights %}
        <form action="/fill_data/" method="post">
            {% csrf_token %}
            <tr>
                <td>{{ unique_flight.flight.flight_number }}</td>
                <td>{{ unique_flight.departure_datetime|date:"Y-m-d" }}</td>
                <td>{{ unique_flight.flight.departure_airport }}</td>
                <td>{{ unique_flight.flight.arrival_airport }}</td>
                <td>{{ unique_flight.flight.departure_time }}</td>
                <td>{{ unique_flight.flight.arrival_time }}</td>
                <td>
                    {% if unique_flight.left_seats_E > 0 %}
                        <input id="class_of_service_E" type="radio" name="class_of_service" value="E" checked="true"/>
                        {{ unique_flight.flight.price_E }}
                    {% else %}
                        not available
                    {% endif %}
                </td>
                <td>
                    {% if unique_flight.left_seats_B > 0 %}
                        <input type="radio" name="class_of_service" value="B"/> {{ unique_flight.flight.price_B }}
                    {% else %}
                        not available
                    {% endif %}
                </td>
                <td>
                    {% if unique_flight.left_seats_F > 0 %}
                        <input type="radio" name="class_of_service" value="F"/> {{ unique_flight.flight.price_F }}
                    {% else %}
                        not available
                    {% endif %}
                </td>
                <td>
                    <input type="submit" name="action" value="Place order" />
                    <input type="hidden" name="unique_flight_id" value="{{ unique_flight.id }}" />
                </td>
            </tr>
        </form>
    {% endfor %}
    </table>
{% endblock %}
